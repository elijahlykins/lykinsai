@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   THEME VARIABLES — Full Control Over All UI Elements
   ========================================================= */
@layer base {
  :root {
    /* Base Theme */
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;

    --card-bg: 0 0% 100%;
    --card-fg: 0 0% 3.9%;
    --card-glass-opacity: 0.70;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    /* Sidebar */
    --sidebar-bg: 0 0% 98%;
    --sidebar-fg: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-fg: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-fg: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Glass */
    --glass-bg: 0 0% 100%;
    --glass-dark-bg: 0 0% 100%;
    --glass-opacity: 0.80;

    /* Clay */
    --clay-bg: 0 0% 100%;
    --clay-fg: 0 0% 3.9%;
    --clay-border: 0 0% 85%;

    /* Inputs */
    --input-bg: 0 0% 98%;
    --input-border: 0 0% 85%;
    --input-focus: 217 91% 60%;

    /* Pastel theme colors */
    --lavender: 260 30% 75%;
    --mint: 150 35% 70%;
    --blue: 210 35% 70%;
    --peach: 25 40% 75%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;

    --card-bg: 0 0% 3.9%;
    --card-fg: 0 0% 98%;
    --card-glass-opacity: 0.65;

    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    /* Sidebar dark */
    --sidebar-bg: 240 5.9% 10%;
    --sidebar-fg: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-fg: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-fg: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;

    /* Glass */
    --glass-bg: 240 4% 15%;
    --glass-dark-bg: 240 4% 15%;
    --glass-opacity: 0.80;

    /* Clay */
    --clay-bg: 240 5% 12%;
    --clay-fg: 0 0% 98%;
    --clay-border: 240 4% 20%;

    /* Inputs */
    --input-bg: 240 4% 15%;
    --input-border: 240 4% 25%;
    --input-focus: 217 91% 65%;
  }
}

/* Base Reset */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    min-height: 100vh;
  }
}

/* =========================================================
   COMPONENTS — Fully Variable-Driven
   ========================================================= */
@layer components {

  /* --- Glass Surfaces --- */
  .bg-glass {
    background: hsl(var(--glass-bg) / var(--glass-opacity));
    color: hsl(var(--foreground));
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  .bg-glass-sidebar {
    background: hsl(var(--sidebar-bg) / 0.60);
    color: hsl(var(--sidebar-fg));
    backdrop-filter: blur(24px);
    border-right: 1px solid hsl(var(--sidebar-border) / 0.3);
  }

  .bg-glass-card {
    background: hsl(var(--card-bg) / var(--card-glass-opacity));
    color: hsl(var(--card-fg));
    backdrop-filter: blur(16px);
    border: 1px solid hsl(var(--border) / 0.4);
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  }

  /* --- Clay Components --- */
  .clay-card {
    background: hsl(var(--clay-bg) / 0.90);
    color: hsl(var(--clay-fg));
    border: 1px solid hsl(var(--clay-border) / 0.40);
    backdrop-filter: blur(12px);
    border-radius: 1rem;
    box-shadow: 0 8px 32px rgba(0,0,0,0.08);
    padding: calc(1rem * var(--layout-density));
  }

  .clay-input {
    background: hsl(var(--input-bg) / 0.60);
    border: 1px solid hsl(var(--input-border) / 0.60);
    border-radius: 0.75rem;
    backdrop-filter: blur(12px);
    transition: all 0.2s ease;
  }

  .clay-input:focus {
    border-color: hsl(var(--input-focus));
    box-shadow: 0 0 0 2px hsl(var(--input-focus) / 0.5);
  }

  /* --- Buttons --- */
  .glass-button {
    background: hsl(var(--button-bg, var(--glass-bg)) / var(--glass-opacity));
    color: hsl(var(--primary-foreground));
    border: 1px solid hsl(var(--button-border, var(--border)) / 0.4);
    border-radius: 1rem;
    backdrop-filter: blur(12px);
    transition: all 0.25s ease;
  }

  .glass-button:hover {
    background: hsl(var(--button-hover, var(--glass-bg)) / var(--glass-opacity));
  }

}

/* =========================================================
   Pastel Utility Classes (unchanged)
   ========================================================= */

.text-lavender { color: hsl(var(--lavender)); }
.text-mint     { color: hsl(var(--mint)); }
.text-blue     { color: hsl(var(--blue)); }
.text-peach    { color: hsl(var(--peach)); }

.bg-lavender\/10 { background: hsl(var(--lavender) / 0.1); }
.bg-mint\/10     { background: hsl(var(--mint) / 0.1); }
.bg-blue\/10     { background: hsl(var(--blue) / 0.1); }
.bg-peach\/10    { background: hsl(var(--peach) / 0.1); }

.border-lavender\/20 { border-color: hsl(var(--lavender) / 0.2); }
.border-mint\/20     { border-color: hsl(var(--mint) / 0.2); }
.border-blue\/20     { border-color: hsl(var(--blue) / 0.2); }
.border-peach\/20    { border-color: hsl(var(--peach) / 0.2); }

/* =========================================================
   Quill Editor Styling (unchanged, but variable-safe)
   ========================================================= */

.ql-editor li[data-checked="true"]::before {
  content: '☑️';
  margin-left: -1.5em;
}
.ql-editor li[data-checked="false"]::before {
  content: '☐';
  margin-left: -1.5em;
}
.ql-editor li[data-checked] {
  list-style: none;
  margin-left: -1.5em;
}

.ql-editor hr {
  margin: 1.5em 0;
  border: 0;
  border-top: 1px solid hsl(var(--border));
}
.dark .ql-editor hr {
  border-top-color: hsl(var(--border));
}

.ql-editor.ql-blank::before {
  color: hsl(var(--muted-foreground));
  opacity: 0.6;
}
.dark .ql-editor.ql-blank::before {
  color: hsl(var(--muted-foreground));
}

/* Improve line spacing in Quill editor */
.ql-editor {
  line-height: 1.6; /* Notion-like spacing */
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

/* Optional: also style placeholder */
.ql-editor.ql-blank::before {
  line-height: 1.6;
}

.ql-editor {
  /* 1. Slightly bigger font */
  font-size: 15px; /* or 1.0625rem — just a hair bigger than default 16px */

  /* 2. Thinner letters */
  font-weight: 300; /* "Normal" — avoid 500/600 which feel bold */
  /* If Inter is loaded, you can even go to 300 for "Light" */
  /* font-weight: 300; */

  /* 3. More space between letters (improves readability) */
  letter-spacing: 0.05em; /* subtle but effective */
  
  /* Bonus: keep good line spacing */
  line-height: 1.6;
}

/* =========================================================
   AI Definition Highlighting — Blue Glow Effect
   ========================================================= */
@keyframes glow {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.ai-definition-highlight {
  background: linear-gradient(120deg, rgba(59, 130, 246, 0.3) 0%, rgba(147, 51, 234, 0.3) 100%);
  background-size: 200% 200%;
  animation: glow 2s ease-in-out infinite;
  border-radius: 3px;
  padding: 2px 4px 2px 10px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  display: inline-block;
  margin-left: 4px;
  vertical-align: baseline;
}

/* Left-side indicator line */
.ai-definition-highlight::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, rgba(59, 130, 246, 0.9) 0%, rgba(147, 51, 234, 0.9) 100%);
  border-radius: 2px 0 0 2px;
  cursor: pointer;
  transition: all 0.2s;
  z-index: 1;
  box-shadow: 0 0 4px rgba(59, 130, 246, 0.4);
}

.ai-definition-highlight:hover {
  background: linear-gradient(120deg, rgba(59, 130, 246, 0.5) 0%, rgba(147, 51, 234, 0.5) 100%) !important;
  transform: scale(1.02);
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
}

.ai-definition-highlight:hover::before {
  width: 5px;
  background: linear-gradient(180deg, rgba(59, 130, 246, 1) 0%, rgba(147, 51, 234, 1) 100%);
  box-shadow: 0 0 8px rgba(59, 130, 246, 0.8);
}

/* Clickable indicator area - positioned over the line */
.ai-definition-indicator {
  position: absolute;
  left: -2px;
  top: 0;
  bottom: 0;
  width: 10px;
  cursor: pointer;
  z-index: 3;
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
}

.ai-definition-indicator:hover {
  background: rgba(59, 130, 246, 0.15);
  border-radius: 2px;
}

/* Apply to Quill editor content */
.ql-editor .ai-definition-highlight {
  display: inline;
  position: relative;
  margin-left: 4px;
}

.ql-editor .ai-definition-indicator {
  display: inline-block;
  position: absolute;
  left: -2px;
  top: 0;
  height: 100%;
  width: 10px;
  cursor: pointer;
  z-index: 3;
}

/* Clickable question styling */
.ql-editor .clickable-question,
.ql-editor .question-with-answer {
  position: relative;
  display: inline-block;
  user-select: none;
  transition: all 0.2s ease;
  pointer-events: auto !important;
  cursor: pointer !important;
  z-index: 10;
}

.ql-editor .clickable-question:hover,
.ql-editor .question-with-answer:hover {
  opacity: 0.7;
}

.ql-editor .clickable-question:active,
.ql-editor .question-with-answer:active {
  opacity: 0.5;
}

/* Apple-style glassmorphic answer panel */
.apple-glass-panel {
  /* Light mode - frosted glass - ultra transparent */
  background: rgba(160, 160, 160, 0.274) !important;
  backdrop-filter: blur(40px) saturate(200%) !important;
  -webkit-backdrop-filter: blur(40px) saturate(200%) !important;
  border: 0.5px solid rgba(255, 255, 255, 0.342) !important;
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.08),
    0 2px 8px rgba(0, 0, 0, 0.04),
    0 0 0 0.5px rgba(0, 0, 0, 0.02),
    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

/* Dark mode - frosted glass - ultra transparent */
.dark .apple-glass-panel {
  background: rgba(77, 77, 77, 0) !important;
  border: 0.2px solid rgba(255, 255, 255, 0.08) !important;
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.3),
    0 2px 8px rgba(0, 0, 0, 0.2),
    0 0 0 0.5px rgba(255, 255, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.06) !important;
}

/* =========================================================
   RESPONSIVE DESIGN - Mobile & Tablet Optimizations
   ========================================================= */

/* Touch-friendly buttons on mobile */
@media (max-width: 768px) {
  /* Minimum touch target size (44x44px recommended by Apple/Google) */
  button, 
  .clay-button-small,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 0.75rem 1rem;
  }

  /* Better spacing for mobile */
  .clay-card {
    padding: 1rem !important;
  }

  /* Responsive text sizes */
  h1 { font-size: 1.5rem; }
  h2 { font-size: 1.25rem; }
  h3 { font-size: 1.125rem; }

  /* Prevent text selection on buttons (better UX) */
  button {
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }

  /* Better scrolling on mobile */
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Full width inputs on mobile */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  textarea,
  select {
    width: 100%;
    font-size: 16px; /* Prevents zoom on iOS */
  }
}

/* Tablet optimizations */
@media (min-width: 769px) and (max-width: 1024px) {
  .clay-card {
    padding: 1.25rem;
  }
}

/* Touch manipulation for better performance */
.touch-manipulation {
  touch-action: manipulation;
}